<mujoco model="roadheader_ebz260">
  <compiler angle="degree" meshdir="../../meshes/"/>
  <size memory="1024M"/>
  <option timestep="0.001" gravity="0 0 -9.81" integrator="implicitfast"/>

  <asset>
    <texture type="skybox" file="../../asset/desert.png" gridsize="3 4" gridlayout=".U..LFRB.D.." />
    <texture name="plane" type="2d" builtin="checker" rgb1=".1 .1 .1" rgb2=".9 .9 .9" width="512" height="512" mark="cross" markrgb=".8 .8 .8" />
    <material name="plane" reflectance="0.3" texture="plane" texrepeat="1 1" texuniform="true" />
    <!-- 定义新的颜色材质 -->
    <!-- 黑色部件：用于截割头、履带、铲板 -->
    <material name="black_metal" rgba="0.1 0.1 0.1 1" specular="0.5" shininess="0.5"/>
    <!-- 工程黄：用于机身主体 -->
    <material name="engineering_yellow" rgba="0.95 0.75 0.1 0.5" specular="0.3" shininess="0.3"/>
    <!-- 银灰色：用于液压杆、活塞等 -->
    <material name="silver_metal" rgba="0.7 0.7 0.7 0.5" specular="0.8" shininess="0.8"/>
    <!-- 深灰色：用于机械臂连接处等 -->
    <material name="dark_grey" rgba="0.3 0.3 0.3 1" specular="0.3" shininess="0.3"/>
    <!-- 机器人主体颜色，半透明 -->
    <material name="robot_color" rgba="0.792 0.820 0.933 0.3" specular="0.1" shininess="0.1"/>

    <mesh name="base_link" file="base_link.STL" />
    <mesh name="huizhuan_link" file="huizhuan_link.STL" />
    <mesh name="updown_link" file="updown_link.STL" />
    <mesh name="front_back_link" file="front_back_link.STL" />
    <mesh name="jiegetou_link" file="jiegetou_link.STL" />
    <mesh name="chanban_link" file="chanban_link.STL" />
    <mesh name="chanban_huosai_link" file="chanban_huosai_link.STL" />
    <mesh name="chanban_benti_link" file="chanban_benti_link.STL" />
    <mesh name="xinglunpan_link_left" file="xinglunpan_link_left.STL" />
    <mesh name="xinglunpan_link_right" file="xinglunpan_link_right.STL" />
    
  </asset>

  <worldbody>
    <geom name="floor" pos="0 0 0" size="0 0 .25" type="plane" material="plane" condim="3"/>
    <light directional="true" ambient=".3 .3 .3" pos="30 30 30" dir="0 -.5 -1" diffuse=".5 .5 .5" specular=".5 .5 .5" />

     <!-- 掘进机身 -->
    <body name="base_link" pos="0 0 0">
      <!-- <freejoint/> -->
      <inertial pos="-0.187004885484347 -1.18837705660836 0.784619484517979" mass="40000" fullinertia="7012.61198109 1920.71944043 7212.17347859 -2.61899553366 21.3482425074 437.695624919" />
      <geom type="mesh" mesh="base_link" material="robot_color" contype="0" conaffinity="0" />

      <!-- 回转台，控制左右摆动 -->
      <body name="huizhuan_link" pos="0 0.609936943594532 1.50741733901494">
        <inertial pos="-0.0045156685034452 0.389928394422336 -0.0735723638961974" mass="2220" fullinertia="356.141485125 563.767365492 829.6908744 -2.43863060746 -0.734322985633 63.2034851008" />
        <joint name="huizhuan_joint" pos="0 0 0" axis="0 0 1" type="hinge" limited="true" range="-38 36" damping="500000" armature="100" />
        <geom type="mesh" mesh="huizhuan_link" material="engineering_yellow" contype="0" conaffinity="0" />

        <!-- 截割臂，控制上下摆动 -->
        <body name="updown_link" pos="-0.479702969466105 0.7444636062867 0.0330000000000785">
          <inertial pos="0.490020294909422 0.961034126223478 0.414972639266358" mass="8000" fullinertia="1036.23408667 803.819017616 1261.89058625 -34.289692423 -33.336186676 -218.770789971" />
          <joint name="updown_joint" pos="0 0 0" axis="-0.99993217660885 -0.011646552377767 0" type="hinge" limited="true" range="-40 45" damping="2000000" />
          <geom type="mesh" mesh="updown_link" material="engineering_yellow" contype="0" conaffinity="0" />

          <!-- 截割伸缩部，控制前后伸缩 -->
          <body name="front_back_link" pos="-0.033139 1.9866 0.94833">
            <inertial pos="0.470968875236498 0.626894171795733 0.190410120123621" mass="800" fullinertia="47.3553039693 44.210546925 50.9898135171 0.0494901919436 -0.12924877518 -3.3369332106" />
            <joint name="front_back_joint" pos="0 0 0" axis="0.010758 -0.92367 -0.38303" type="slide" limited="true" range="-0.34 0.3" damping="10000"/>
            <geom type="mesh" mesh="front_back_link" material="engineering_yellow" contype="0" conaffinity="0" />

            <!-- 截割头，旋转切割 -->
            <body name="jiegetou_link" pos="0.46938462258532 0.914194374969433 0.252284999266074">
              <site name="cutter_tip" pos="0 0 0" size="0.02" rgba="1 0 0 1"/>
              <inertial pos="-0.00429994447681969 0.334730266430001 0.138941698694205" mass="2410" fullinertia="197.092104668 168.287613744 192.137698719 0.334580205079 0.140374772092 -11.9442095725" />
              <joint name="jiegetou_joint" pos="0 0 0" axis="-0.0107583457090147 0.923673864384503 0.383028524069167" type="hinge" limited="false"/>
              <geom type="mesh" mesh="jiegetou_link" material="black_metal" contype="1" conaffinity="1" condim="3" friction="0.8 0.005 0.0001" />
            </body>
          </body>
        </body>
      </body>

      <!-- 铲板机构 -->
      <body name="chanban_link" pos="-0.41899999999998 1.14993694359281 0.835286561443913">
        <inertial pos="0.421999999976831 0.244667533077565 -0.0575007260342454" mass="175" fullinertia="5.71214742411 1.62840738358 5.38910508517 -3.43146296503e-09 -1.27841025789e-08 0.936963383099" />
        <joint name="chanban_joint" pos="0 0 0" axis="-1 0 0" type="hinge" limited="true" range="-15 15"/>
        <geom type="mesh" mesh="chanban_link" material="black_metal" contype="0" conaffinity="0" />

        <body name="chanban_huosai_link" pos="0 0.339672954967903 -0.0801453907805885">
          <inertial pos="0.422 0.236593265908223 -0.0558238725655861" mass="175" fullinertia="4.67036972958 0.802869244218 4.24805374965 1.01569728199e-14 5.76544785405e-14 0.860809600256" />
          <joint name="chanban_huosai_joint" pos="0 0 0" axis="0 -0.97327494260144 0.229642953526041" type="slide" limited="true" range="-0.18 0.08"/>
          <geom type="mesh" mesh="chanban_huosai_link" material="black_metal" contype="0" conaffinity="0"/>

          <body name="chanban_benti_link" pos="0 0.378768474922782 -0.0893699277319111">
            <inertial pos="0.41833751220593 0.721211102001956 -0.352140461186548" mass="6000" fullinertia="1336.71958311 592.990751166 1761.23104041 80.6620756608 1.73990517542 189.296115578" />
            <joint name="chanban_benti_joint" pos="0 0 0" axis="1 0 0" type="hinge" limited="true" range="-15 15" />
            <geom type="mesh" mesh="chanban_benti_link" material="black_metal" contype="1" conaffinity="1" condim="3" friction="0.7 0.005 0.0001" />

            <body name="xinglunpan_link_left" pos="-0.358000000000011 0.897774564291463 -0.224779517992865">
              <inertial pos="-1.80366832580603E-12 0.0130100641003494 0.0601799032548234" mass="100" fullinertia="1.64844264078 1.72431326231 3.14516089405 4.1107759071e-05 -8.87644675471e-06 0.322227356975" />
              <joint name="xinglunpan_joint_left" pos="0 0 0" axis="0 -0.211304768939857 -0.977420224173448" type="hinge" limited="false" />
              <geom type="mesh" mesh="xinglunpan_link_left" material="black_metal" contype="0" conaffinity="0" />
            </body>

            <body name="xinglunpan_link_right" pos="1.20199999999999 0.897774564291463 -0.224779517992883">
              <inertial pos="-6.41790370847772E-10 0.0130100642672515 0.0601799032174734" mass="100" fullinertia="1.65001336759 1.7228140028 3.14509215946 0.00263784345715 -0.000570344250235 0.322551695233" />
              <joint name="xinglunpan_joint_right" pos="0 0 0" axis="0 -0.211304768939858 -0.977420224173448" type="hinge" limited="false" />
              <geom type="mesh" mesh="xinglunpan_link_right" material="black_metal" contype="0" conaffinity="0" />
            </body>
          </body>
        </body>
      </body>
    </body>
  </worldbody>

  <actuator>
    <position name="act_left_right" joint="huizhuan_joint" 
              kp="2000000" kv="200000" ctrlrange="-1.00 1.00" ctrllimited="true"/>

    <position name="act_up_down" joint="updown_joint" 
              kp="10000000" kv="800000" ctrlrange="-1.00 1.00" ctrllimited="true" />

    <position name="act_front_back" joint="front_back_joint" 
              kp="2000000" kv="100000" ctrlrange="-1.00 1.00" ctrllimited="true"/>

    <position name="act_shovel" joint="chanban_huosai_joint" 
              kp="50000000" kv="10000000" ctrlrange="-1.00 1.00" ctrllimited="true"/>

    <velocity name="act_cutter_spin" joint="jiegetou_joint" kv="500" ctrlrange="-20 20" ctrllimited="true"/>
    <velocity name="act_star_left" joint="xinglunpan_joint_left" kv="200" ctrlrange="-10 10" ctrllimited="true"/>
    <velocity name="act_star_right" joint="xinglunpan_joint_right" kv="200" ctrlrange="-10 10" ctrllimited="true"/>
  </actuator>

  <!-- 解决凸包问题 -->
  <contact>
    <exclude body1="base_link" body2="chanban_benti_link"/>
    <exclude body1="jiegetou_link" body2="chanban_benti_link"/>
    <exclude body1="jiegetou_link" body2="base_link"/>
  </contact>

  <sensor>
    <framepos name="sensor_cutter_pos" objtype="site" objname="cutter_tip"/>
    <framelinvel name="sensor_cutter_vel" objtype="site" objname="cutter_tip"/>
  </sensor>

</mujoco>